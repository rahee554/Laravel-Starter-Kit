document.addEventListener("DOMContentLoaded",function(){m(),p(),h(),v(),d()});function d(){const t=document.getElementById("particles-js");if(t){t.innerHTML="";for(let i=0;i<50;i++){const e=document.createElement("div");e.className="css-particle",e.style.left=Math.random()*100+"%",e.style.top=Math.random()*100+"%",e.style.animationDelay=Math.random()*20+"s",e.style.animationDuration=Math.random()*10+10+"s";const s=Math.random()*3+2;e.style.width=s+"px",e.style.height=s+"px",t.appendChild(e)}f(t)}}function f(t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("class","particles-svg"),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.pointerEvents="none",i.style.opacity="0.2",t.insertBefore(i,t.firstChild),setInterval(()=>{const e=t.querySelectorAll(".css-particle");i.innerHTML="";for(let s=0;s<Math.min(e.length,20);s++){const n=e[s],r=e[(s+1)%e.length];if(n&&r){const a=document.createElementNS("http://www.w3.org/2000/svg","line"),o=n.getBoundingClientRect(),l=r.getBoundingClientRect(),c=t.getBoundingClientRect();a.setAttribute("x1",o.left-c.left+o.width/2),a.setAttribute("y1",o.top-c.top+o.height/2),a.setAttribute("x2",l.left-c.left+l.width/2),a.setAttribute("y2",l.top-c.top+l.height/2),a.setAttribute("stroke","#00aaff"),a.setAttribute("stroke-width","1"),i.appendChild(a)}}},3e3)}function m(){document.querySelectorAll("form").forEach(i=>{if(i.addEventListener("submit",function(e){let s=!0;if(this.querySelectorAll("input, select, textarea").forEach(r=>{u(r,!1)||(s=!1)}),s){const r=this.querySelector('button[type="submit"]');if(r){const a=r.textContent;r.disabled=!0,r.innerHTML='<span class="spinner"></span>Processing...',r.dataset.originalText=a}}else{e.preventDefault();const r=i.querySelector(".is-invalid");r&&r.focus()}}),i.querySelector(".is-invalid")){const e=i.querySelector('button[type="submit"]');if(e&&e.disabled){e.disabled=!1;const s=e.dataset.originalText||"Sign In";e.innerHTML=s}}})}function p(){document.querySelectorAll("[data-password-toggle]").forEach(i=>{const e=document.querySelector(i.getAttribute("data-target"));e&&i.addEventListener("click",function(s){s.preventDefault(),e.getAttribute("type")==="password"?(e.setAttribute("type","text"),this.classList.add("toggled"),this.setAttribute("aria-label","Hide password")):(e.setAttribute("type","password"),this.classList.remove("toggled"),this.setAttribute("aria-label","Show password"))})})}function h(){const t=document.querySelector("form");if(!t)return;const i=t.querySelectorAll("input, select, textarea");i.forEach(e=>{e.addEventListener("input",function(){if(this.classList.contains("is-invalid")){this.classList.remove("is-invalid");const s=this.parentElement.querySelector(".invalid-feedback");s&&!s.hasAttribute("data-server-error")&&(s.style.display="none"),this.value.trim()&&u(this,!0)}}),e.addEventListener("blur",function(){this.value.trim()&&this.classList.contains("is-invalid")&&u(this,!0)})}),t.addEventListener("submit",function(e){let s=!0;if(i.forEach(n=>{u(n,!1)||(s=!1)}),!s){e.preventDefault();const n=t.querySelector(".is-invalid");n&&n.focus()}})}function u(t,i=!1){let e=!0,s="";if(t.hasAttribute("required")&&!t.value.trim()&&(e=!1,s="This field is required"),t.type==="email"&&t.value.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)||(e=!1,s="Please enter a valid email address")),t.type==="password"&&t.value.trim()&&t.hasAttribute("minlength")){const n=t.getAttribute("minlength");t.value.length<n&&(e=!1,s=`Password must be at least ${n} characters`)}if(e){t.classList.remove("is-invalid"),i||t.classList.add("is-valid");const n=t.parentElement.querySelector(".invalid-feedback:not([data-server-error])");n&&n.remove()}else{t.classList.add("is-invalid"),t.classList.remove("is-valid");let n=t.parentElement.querySelector(".invalid-feedback:not([data-server-error])");n||t.parentElement.querySelector(".invalid-feedback[data-server-error]")||(n=document.createElement("div"),n.className="invalid-feedback",t.parentElement.appendChild(n)),n&&(n.textContent=s,n.style.display="block")}return e}function v(){if("IntersectionObserver"in window){const t=new IntersectionObserver(i=>{i.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-fade-in"),t.unobserve(e.target))})},{threshold:.1});document.querySelectorAll("[data-animate]").forEach(i=>{t.observe(i)})}}window.showAlert=function(t,i="info"){const e=document.createElement("div");e.className=`alert alert-${i}`,e.setAttribute("role","alert"),e.innerHTML=`
        ${t}
        <button type="button" class="close-btn" aria-label="Close"></button>
    `;const s=document.querySelector("form");s?s.parentElement.insertBefore(e,s):document.body.insertBefore(e,document.body.firstChild);const n=e.querySelector(".close-btn");n&&n.addEventListener("click",()=>{e.remove()}),setTimeout(()=>{e.remove()},5e3)};window.setupCSRFToken=function(){const t=document.querySelector('meta[name="csrf-token"]');t&&document.querySelectorAll("form").forEach(i=>{if(!i.querySelector('input[name="_token"]')){const e=document.createElement("input");e.type="hidden",e.name="_token",e.value=t.getAttribute("content"),i.appendChild(e)}})};window.setupCSRFToken();

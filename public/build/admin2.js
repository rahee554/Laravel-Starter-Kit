document.addEventListener("DOMContentLoaded",function(){l(),d(),u(),m(),f(),b(),p()});function l(){const e=document.querySelector(".admin-layout-sidebar"),t=document.querySelector(".admin-shell"),o=document.querySelector(".admin-board"),n=document.querySelectorAll("#sidebarToggle, [data-sidebar-toggle]");if(!e&&!t&&!o)return;const i=s=>{s?.preventDefault(),e&&(e.classList.toggle("sidebar-collapsed"),localStorage.setItem("sidebar-collapsed",e.classList.contains("sidebar-collapsed")?"true":"false")),t?.classList.toggle("sidebar-open"),o?.classList.toggle("sidebar-open")};n.forEach(s=>{s.addEventListener("click",i)}),document.addEventListener("click",s=>{if(!t&&!o)return;const a=s.target.closest("[data-sidebar-toggle]"),r=s.target.closest(".admin-shell__sidebar, .admin-board__rail");!a&&!r&&(t?.classList.contains("sidebar-open")||o?.classList.contains("sidebar-open"))&&(t?.classList.remove("sidebar-open"),o?.classList.remove("sidebar-open"))}),localStorage.getItem("sidebar-collapsed")==="true"&&e?.classList.add("sidebar-collapsed")}function d(){const e=window.location.pathname;document.querySelectorAll(".nav-link, .header-nav a").forEach(o=>{const n=o.getAttribute("href");if(n&&e.includes(n)){o.classList.add("active");const i=o.closest(".nav-item");i&&i.classList.add("active")}})}function u(){document.querySelectorAll("table").forEach(t=>{if(!t.parentElement.classList.contains("table-responsive")){const o=document.createElement("div");o.className="table-responsive",t.parentElement.insertBefore(o,t),o.appendChild(t)}t.querySelectorAll("tbody tr").forEach(o=>{o.addEventListener("click",function(){this.classList.toggle("selected")})})})}function m(){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(t=>{new bootstrap.Tooltip(t)})}function f(){document.querySelectorAll('[data-bs-toggle="popover"]').forEach(t=>{new bootstrap.Popover(t)})}function b(){const e=document.querySelector(".admin-sidebar");if(e){if(window.innerWidth<=768){const t=document.querySelector(".sidebar-toggle");t&&(t.addEventListener("click",function(){e.classList.toggle("mobile-open")}),document.addEventListener("click",function(o){!o.target.closest(".admin-sidebar")&&!o.target.closest(".sidebar-toggle")&&e.classList.remove("mobile-open")}))}window.addEventListener("resize",function(){window.innerWidth>768&&e.classList.remove("mobile-open")})}}function p(){document.querySelectorAll("[data-table-search]").forEach(t=>{const o=t.getAttribute("data-table-search"),n=document.querySelector(o);n&&t.addEventListener("keyup",function(){const i=this.value.toLowerCase();n.querySelectorAll("tbody tr").forEach(s=>{const a=s.textContent.toLowerCase();s.style.display=a.includes(i)?"":"none"})})})}window.confirmDelete=function(e="Are you sure you want to delete this item?"){return confirm(e)};window.showToast=function(e,t="info",o=3e3){const n=document.getElementById("toastContainer")||g(),i="toast-"+Date.now(),c=`
        <div id="${i}" class="toast show" role="alert">
            <div class="toast-body bg-${t} text-white">
                ${e}
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
            </div>
        </div>
    `;n.insertAdjacentHTML("beforeend",c);const s=document.getElementById(i);setTimeout(()=>{s.remove()},o)};function g(){const e=document.createElement("div");return e.id="toastContainer",e.className="toast-container position-fixed bottom-0 end-0 p-3",e.style.zIndex=9999,document.body.appendChild(e),e}window.exportTableToCSV=function(e,t="export.csv"){const o=document.getElementById(e);if(!o)return;let n=[];o.querySelectorAll("tr").forEach(c=>{const s=c.querySelectorAll("td, th"),a=[];s.forEach(r=>{a.push('"'+r.textContent.trim()+'"')}),n.push(a.join(","))}),h(n.join(`
`),t)};function h(e,t){const o=new Blob([e],{type:"text/csv"}),n=document.createElement("a");n.href=URL.createObjectURL(o),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}window.printPage=function(){window.print()};window.formatCurrency=function(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)};window.formatDate=function(e,t="short"){const o=new Date(e);return t==="short"?o.toLocaleDateString("en-US"):t==="long"?o.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):o.toLocaleString("en-US")};window.ajaxRequest=function(e,t={}){const o=document.querySelector('meta[name="csrf-token"]'),n={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"};return o&&(n["X-CSRF-TOKEN"]=o.getAttribute("content")),fetch(e,{...t,headers:{...n,...t.headers}})};
